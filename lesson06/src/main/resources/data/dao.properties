genre.get=select id, genre, description from books.genre_data where id = :id
genre.insert=insert into books.genre_data (genre, description) values(:genre, :desc)
genre.update=insert into books.genre_data values(:id, :genre, :desc) on conflict (id) do update set genre = :genre, description = :desc
genre.delete=delete from books.genre_data where id = :id
genre.list=select id, genre, description from books.genre_data where 1=1
genre.max=select coalesce(max(id),0) from books.genre_data
#
author.get=select id, firstname, surname, lastname, country from books.author_data where id= :id
author.insert=insert into books.author_data (firstname, surname, lastname, country) values(:firstname, :surname, :lastname, :country)
author.update=insert into books.author_data values(:id, :firstname, :surname, :lastname, :country) \
  on conflict (id) do update \
  set firstname= :firstname,\
  surname= :surname,\
  lastname= :lastname,\
  country= :country 
author.delete=delete from books.author_data where id= :id
author.list=select firstname, surname, lastname, country from books.author_data where 1=1
author.max=select coalesce(max(id),0) from books.author_data
#
books.get=select b.id,\
  b.genre_id  genreid, g.genre,\
  b.author_id authorid, a.lastname||' '||coalesce(a.firstname,chr(1))||' '||coalesce(surname, chr(1)) authorname,\
  b.title,\
  b.isbn,\
  b.pages,\
  b.description \
  from books.books_data b \
  join books.genre_data g on g.id = b.genre_id \
  join books.author_data a on a.id = b.author_id \
  where 1=1 \
  and b.id = :id
books.insert=insert into books.books_data (author_id, genre_id, title, isbn, pages, description) \
  values (:author_id, :genre_id, :title, :isbn, :pages, :description)
books.update=insert into books.books_data values(:id, :author_id, :genre_id, :title, :isbn, :pages, :description) \
  on conflict(id) do update \
  set author_id = :author_id,\
  genre_id = :genre_id,\
  title = :title,\
  isbn = :isbn,\
  pages = :pages,\
  description = :description
books.delete=delete from books.books_data where id = :id
books.list=select b.id,\
  b.genre_id  genreid, g.genre,\
  b.author_id authorid, a.lastname||' '||coalesce(a.firstname,chr(1))||' '||coalesce(surname, chr(1)) authorname,\
  b.title,\
  b.isbn,\
  b.pages,\
  b.description \
  from books.books_data b \
  join books.genre_data g on g.id = b.genre_id \
  join books.author_data a on a.id = b.author_id \
  where 1=1
books.max=select coalesce(max(id),0) id from books.books_data
